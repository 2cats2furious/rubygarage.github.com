<section id="user-controller-specs" class="slide">
  <h2>Controller specs</h2>
  spec/controllers/users_controller_spec.rb
  <script type="syntaxhighlighter" class="brush: ruby">
    require 'spec_helper'

    describe UsersController do
      describe 'GET new' do
        let(:user) { mock_model("User").as_new_record }

        before do
          User.stub(:new).and_return(user)
          get :new
        end

        it 'assigns @user variable' do
          expect(assigns[:user]).to eq(user)
        end

        it 'renders new template' do
          expect(response).to render_template :new
        end
      end
    end
  </script>
  app/controllers/users_controller.rb
  <script type="syntaxhighlighter" class="brush: ruby">
    class UsersController < ApplicationController
      def new
        @user = User.new
      end
    end
  </script>
  <script type="syntaxhighlighter" class="brush: bash">
    $ rspec spec/controllers/users_controller_spec.rb
    NameError:
      uninitialized constant User
  </script>
</section>